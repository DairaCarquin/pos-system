<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <link rel="stylesheet" href="/css/Carrito.css" />
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link
         href="https://fonts.googleapis.com/css2?family=Cascadia+Code:ital,wght@0,200..700;1,200..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
         rel="stylesheet"
      />
   </head>
   <body>
      <nav>
         <a href="/productos"> ðŸ¢˜ Seguir comprando</a>
      </nav>
      <h1 th:if="${ carrito != null && carrito.size >0 }">CARRITO DE COMPRAS</h1>
      <h2 th:if="${ carrito == null || carrito.size <1 }">Ups, carrito vacio!</h2>
      <hr style="margin: 1rem 0" />
      <div class="container" th:if="${ carrito != null && carrito.size >0 }">
         <table border="0">
            <thead>
               <tr>
                  <th></th>
                  <th>Producto</th>
                  <th>Precio</th>
                  <th>Cantidad</th>
                  <th>Subtotal</th>
               </tr>
            </thead>

            <tbody>
               <tr th:each="item : ${carrito}">
                  <td>
                     <form th:action="@{/carrito/delete}" method="post">
                        <input type="hidden" name="id" th:value="${item.productoId}" />
                        <input class="buttonDelete" type="submit" value="Delete" />
                     </form>
                  </td>
                  <td th:text="${item.nombre}"></td>
                  <td th:text="@{ ${item.precio} + ' $'}"></td>
                  <td th:text="${item.quantity}"></td>
                  <td th:text="@{ ${item.subtotal} + ' $'}"></td>
               </tr>
            </tbody>
         </table>
         <article class="zoneCalculadora">
            <h3 style="display: flex">
               Subtotal
               <p th:text="${subtotal}"></p>
               <hr />
            </h3>
            <h3 style="display: flex">
               IGV
               <p th:text="${igv}"></p>
               <hr />
            </h3>
            <h3 style="display: flex">
               Total
               <p th:text="${total}"></p>
               <hr />
            </h3>

            <!-- Formulario con selector de mÃ©todo de pago -->
            <form class="zonaFinalizar" action="/carrito/finalizar" method="post">
               <label for="metodoPago">MÃ©todo de pago</label>
               <select style="font-size: 0.7rem" name="metodoPago" id="metodoPago" required>
                  <option value="EFECTIVO">Efectivo</option>
                  <option value="TARJETA">Tarjeta</option>
                  <option value="MIXTO">Mixto</option>
               </select>

               <button class="buttonFinalizar" type="submit">Finalizar Compra</button>
            </form>
         </article>
      </div>
   </body>
</html>
