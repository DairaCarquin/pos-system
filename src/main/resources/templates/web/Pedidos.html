<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
   <head>
      <meta charset="UTF-8" />
      <title>Ventas</title>
   </head>
   <style>
      body {
         font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
         background-color: #f9f9f9;
         color: #333;
         margin: 40px;
      }

      h1 {
         text-align: center;
         color: #2c3e50;
         margin-bottom: 30px;
      }

      table {
         width: 100%;
         border-collapse: collapse;
         margin-bottom: 40px;
         background-color: #fff;
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
         border-radius: 10px;
         overflow: hidden;
      }

      th,
      td {
         padding: 5px 18px;
         text-align: left;
         border-bottom: 1px solid #eee;
      }

      thead {
         background-color: #2980b9;
         color: #fff;
      }

      tbody tr:hover {
         background-color: #f1f1f1;
      }

      a {
         display: inline-block;
         padding: 6px 12px;
         background-color: #e74c3c;
         color: white;
         border-radius: 4px;
         text-decoration: none;
         font-size: 14px;
      }

      a:hover {
         background-color: #c0392b;
      }

      span {
         padding: 6px 12px;
         background-color: #95a5a6;
         color: white;
         border-radius: 4px;
         font-size: 14px;
      }

      /* Subtabla de detalles */
      td table {
         width: 100%;
         margin-top: 10px;
         border: 1px solid #ccc;
      }

      td table th {
         background-color: #ecf0f1;
         color: #2c3e50;
         font-weight: 600;
      }

      td table td {
         background-color: #fefefe;
      }

      td table th,
      td table td {
         padding: 10px;
         border: 1px solid #ddd;
      }
   </style>

   <body>
      <h1>Lista de Ventas</h1>

      <table border="1">
         <thead>
            <tr>
               <th>Fecha</th>
               <th>Total</th>
               <th>Estado</th>
               <th>Comprobante</th>
               <th>Detalles</th>
               <th>Acciones</th>
            </tr>
         </thead>
         <tbody>
            <tr th:each="venta : ${ventas}">
               <td th:text="${venta.fecha}"></td>
               <td th:text="@{ '$ ' + ${venta.total}}"></td>
               <td th:text="${venta.estado}"></td>
               <td th:text="${venta.numeroComprobante}"></td>
               <td>
                  <table border="0">
                     <thead>
                        <tr>
                           <th>Producto</th>
                           <th>Cantidad</th>
                           <th>Precio</th>
                           <th>Subtotal</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr th:each="detalle : ${venta.detalles}">
                           <td th:text="${detalle.nombreProducto}"></td>
                           <td th:text="${detalle.cantidad}"></td>
                           <td th:text="${detalle.precioUnitario}"></td>
                           <td th:text="${detalle.subtotal}"></td>
                        </tr>
                     </tbody>
                  </table>
               </td>
               <td>
                  <a th:href="@{'/ventas/' + ${venta.id} + '/anular'}" th:if="${venta.estado == 'ACTIVA'}">Anular</a>
                  <span th:if="${venta.estado == 'ANULADA'}">Anulada</span>
               </td>
            </tr>
         </tbody>
      </table>
   </body>
</html>
