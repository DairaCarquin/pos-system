<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
   <head>
      <meta charset="UTF-8" />
      <title>Ventas</title>
      <link rel="stylesheet" th:href="@{/css/ventas.css}">
   </head>
   <body>
      <h1>Lista de Ventas</h1>

      <table border="1">
         <thead>
            <tr>
               <th>ID Venta</th>
               <th>Fecha</th>
               <th>Total</th>
               <th>Estado</th>
               <th>Comprobante</th>
               <th>Detalles</th>
               <th>Acciones</th>
            </tr>
         </thead>
         <tbody>
            <tr th:each="venta : ${ventas}">
               <td th:text="${venta.id}"></td>
               <td th:text="${venta.fecha}"></td>
               <td th:text="${venta.total}"></td>
               <td th:text="${venta.estado}"></td>
               <td th:text="${venta.numeroComprobante}"></td>
               <td>
                  <table border="0">
                     <thead>
                        <tr>
                           <th>Producto</th>
                           <th>Cantidad</th>
                           <th>Precio</th>
                           <th>Subtotal</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr th:each="detalle : ${venta.detalles}">
                           <td th:text="${detalle.nombreProducto}"></td>
                           <td th:text="${detalle.cantidad}"></td>
                           <td th:text="${detalle.precioUnitario}"></td>
                           <td th:text="${detalle.subtotal}"></td>
                        </tr>
                     </tbody>
                  </table>
               </td>
               <td>
                  <a th:href="@{'/ventas/' + ${venta.id} + '/anular'}" th:if="${venta.estado == 'ACTIVA'}">Anular</a>
                  <span th:if="${venta.estado == 'ANULADA'}">Anulada</span>
               </td>
            </tr>
         </tbody>
      </table>
   </body>
</html>
